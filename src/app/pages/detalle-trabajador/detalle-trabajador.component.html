<div class="detalle-trabajador-container">

  <!-- Sidebar -->
  <div class="sidebar">
    <h3>Panel de Trabajadores</h3>
    <ul class="nav flex-column">
      <li class="nav-item"><button class="btn-sidebar" routerLink="/dashboard">ğŸ  Dashboard</button></li>
      <li class="nav-item"><button class="btn-sidebar" routerLink="/sedes">ğŸ“ Sedes</button></li>
      <li class="nav-item"><button class="btn-sidebar" routerLink="/trabajadores">ğŸ‘· Trabajadores</button></li>
      <li class="nav-item"><button class="btn-sidebar" routerLink="/perfil">ğŸ‘¤ Perfil</button></li>
    </ul>
    <button class="btn-logout" (click)="cerrarSesion()">âŒ Cerrar SesiÃ³n</button>
  </div>

  <!-- Contenido Principal -->
  <div class="main-content">
    <div class="content-container">

      <!-- BotÃ³n de regresar -->
      <button class="btn-regresar" (click)="regresar()">â¬… Regresar</button>

      <!-- TÃ­tulo con nombre y sede -->
      <h2 class="titulo-nombre">ğŸ‘¤ {{ trabajador.nombre }}</h2>

      <p class="subtitulo-sede">
        ğŸ¢ {{ obtenerNombreSede(trabajador.sede) }}
      </p>

      <!-- ğŸ“Œ InformaciÃ³n del Trabajador en un panel colapsable -->
      <mat-accordion>
        <mat-expansion-panel [expanded]="false" class="panel-transparente">
          <mat-expansion-panel-header>
            <mat-panel-title>
              ğŸ›  InformaciÃ³n del Trabajador
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-card class="seccion-card">
            <mat-card-content>
              <div class="info-trabajador">
                <div class="info-campos">

                  <label>Nombre:
                    <input type="text" [(ngModel)]="trabajador.nombre" [readonly]="rolUsuario === 'Revisor' || !modoEdicion">
                  </label>

                  <label>Correo:
                    <input type="email" [(ngModel)]="trabajador.correo" [readonly]="rolUsuario === 'Revisor' || !modoEdicion">
                  </label>

                  <label>TelÃ©fono:
                    <input type="text" [(ngModel)]="trabajador.telefono" [readonly]="rolUsuario === 'Revisor' || !modoEdicion">
                  </label>

                  <label>TelÃ©fono de Emergencia:
                    <input type="text" [(ngModel)]="trabajador.telefonoEmergencia" [readonly]="rolUsuario === 'Revisor' || !modoEdicion">
                  </label>

                  <label>DirecciÃ³n:
                    <input type="text" [(ngModel)]="trabajador.direccion" [readonly]="rolUsuario === 'Revisor' || !modoEdicion">
                  </label>

                  <label>Puesto:
                    <input type="text" [(ngModel)]="trabajador.puesto" [readonly]="rolUsuario === 'Revisor' || !modoEdicion">
                  </label>

                </div>

                <!-- Botones de acciÃ³n -->
                <div class="botones">
                  <button (click)="activarEdicion()" *ngIf="!modoEdicion" class="editar">
                    <i class="bi bi-pencil-fill"></i> Editar
                  </button>
                  <button (click)="actualizarTrabajador()" *ngIf="modoEdicion" class="actualizar">
                    <i class="bi bi-save-fill"></i> Actualizar
                  </button>
                  <button (click)="cancelarEdicion()" *ngIf="modoEdicion" class="cancelar">
                    <i class="bi bi-x-circle-fill"></i> Cancelar
                  </button>
                </div>

              </div>
            </mat-card-content>
          </mat-card>

        </mat-expansion-panel>
      </mat-accordion>

      <!-- ğŸ“… ConfiguraciÃ³n de Calendario del Trabajador -->
      <mat-card class="seccion-card">
        <mat-card-title>ğŸ—“ ConfiguraciÃ³n de Calendario del Trabajador</mat-card-title>
        <mat-card-content>
          <app-calendario-trabajador
            [trabajador]="trabajador"
            (eventoGuardado)="onEventoGuardado($event)"
            (eventoEliminado)="onEventoEliminado($event)">
          </app-calendario-trabajador>
        </mat-card-content>
      </mat-card>

      <!-- Mensaje para Revisor -->
      <div class="mensaje-revisor" *ngIf="rolUsuario === 'Revisor'">
        ğŸ”’ Solo puedes visualizar los detalles del trabajador.
      </div>

      <!-- ğŸ“† Calendario de Asistencias -->
      <div class="calendario-container">
        <h3>ğŸ“… Calendario de Asistencias</h3>
        <app-calendario [asistencias]="trabajador.asistencias"></app-calendario>
      </div>

    </div>
  </div>

</div>
