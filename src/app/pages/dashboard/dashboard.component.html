<div class="dashboard-container">
  <!-- 📌 Botón de menú para dispositivos móviles -->
  <button class="menu-toggle" (click)="toggleSidebar()">☰</button>

  <div class="sidebar-overlay" (click)="toggleSidebar()"></div>

  <!-- 📌 Barra lateral (Sidebar) -->
  <div class="sidebar">
    <h3>Dashboard</h3>
    <ul class="nav flex-column">
      <li class="nav-item">
        <button class="btn-sidebar" routerLink="/sedes">🏢 Sedes</button>
      </li>
      <li class="nav-item">
        <button class="btn-sidebar" routerLink="/trabajadores">👷 Trabajadores</button>
      </li>
      <li class="nav-item">
        <button class="btn-sidebar" routerLink="/calendario-laboral">📅 Calendario Laboral</button>
      </li>
      <li class="nav-item">
        <button class="btn-sidebar" routerLink="/acerca-de">ℹ️ Acerca de</button>
      </li>
      <li class="nav-item" *ngIf="esAdmin()">
        <button class="btn-sidebar" routerLink="/admin-dashboard">📋 Ver Usuarios</button>
      </li>
    </ul>
    <button class="btn-logout" (click)="cerrarSesion()">❌ Cerrar Sesión</button>
  </div>

  <!-- 📌 Contenido principal -->
  <div class="main-content">
    <!-- 📌 Contenedor de bienvenida -->
    <div class="welcome-card">
      <h2>Bienvenido, {{ usuarioNombre }} 👋</h2>
      <p>Selecciona una opción del menú para comenzar.</p>
    </div>

    <!-- 📌 Tabla: Trabajadores que llegaron hoy -->
    <mat-accordion>
      <mat-expansion-panel class="panel-transparente" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            👥 Trabajadores que llegaron hoy
          </mat-panel-title>
        </mat-expansion-panel-header>

        <!-- 🔎 Filtro de sede -->
        <div class="search-container transparente">
          <label>Filtrar por sede:</label>
          <select [(ngModel)]="filtroSede" (change)="filtrarPorSede()">
            <option value="">Todas las sedes</option>
            <option *ngFor="let sede of sedes" [value]="sede.id">{{ sede.nombre }}</option>
          </select>
        </div>

        <!-- Tabla de trabajadores -->
        <div *ngIf="trabajadoresHoy.length > 0">
          <table mat-table [dataSource]="trabajadoresHoy" class="mat-elevation-z1 full-width-table">

            <!-- Nombre -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef class="morado-header">Nombre</th>
              <td mat-cell *matCellDef="let trabajador" class="nombre-col">{{ trabajador.nombre }}</td>
            </ng-container>

            <!-- Hora -->
            <ng-container matColumnDef="hora">
              <th mat-header-cell *matHeaderCellDef class="morado-header">Entrada</th>
              <td mat-cell *matCellDef="let trabajador">{{ trabajador.hora }}</td>
            </ng-container>

            <!-- Sede -->
            <ng-container matColumnDef="sede">
              <th mat-header-cell *matHeaderCellDef class="morado-header">Sede</th>
              <td mat-cell *matCellDef="let trabajador">{{ trabajador.sede }}</td>
            </ng-container>

            <!-- Acción -->
            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef class="morado-header">Acciones</th>
              <td mat-cell *matCellDef="let trabajador">
                <button class="btn-ver" (click)="verDetalle(trabajador)">
                  Ver Trabajador
                </button>
              </td>
            </ng-container>

            <!-- Filas -->
            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
          </table>
        </div>

        <div *ngIf="trabajadoresHoy.length === 0" style="padding: 16px;">
          🫥 No hay trabajadores registrados hoy en esta sede.
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
